<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- 모바일 대응을 위한 메타 태그 추가 -->
    <title>나의 오늘</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
        }

        .schedule {
            margin-top: 20px;
            border: 1px solid #000;
            padding: 10px;
        }
        table {
            border-collapse: collapse;
            width: 100%;
        }
        th, td {
            border: 1px solid #000;
            padding: 5px;
            text-align: center;
        }
        th {
            background-color: #f2f2f2;
        }

        /* 모바일 친화적 스타일 */
        #color-buttons, #textInputButton, button {
            display: flex;
            flex-direction: column; /* 세로 방향으로 배치 */
            align-items: center;
            margin: 10px 0;
        }

        button {
            width: 100%; /* 버튼을 가로로 꽉 채움 */
            padding: 10px;
            font-size: 16px; /* 글씨 크기 */
        }

        @media (min-width: 600px) {
            #color-buttons, #textInputButton, button {
                flex-direction: row; /* 넓은 화면에서는 가로로 배치 */
            }
            button {
                width: auto; /* 버튼 크기를 자동으로 조정 */
                margin: 0 5px; /* 버튼 간 간격 */
            }
        }
    </style>
</head>
<body>
    <h1>나의 오늘</h1>
    
    <!-- 색칠하기 버튼 -->
    <div id="color-buttons">
        <button style="background-color: lightblue;" onclick="setColor('lightblue')">파란색</button>
        <button style="background-color: lightgreen;" onclick="setColor('lightgreen')">초록색</button>
        <button style="background-color: lightcoral;" onclick="setColor('lightcoral')">빨간색</button>
        <button style="background-color: lightgoldenrodyellow;" onclick="setColor('lightgoldenrodyellow')">노란색</button>
        <button style="background-color: lightgray;" onclick="setColor('lightgray')">회색</button>
        <button onclick="setColor('')">지우기</button> <!-- 색 지우기 버튼 추가 -->
    </div>

    <!-- 텍스트 입력 버튼 -->
    <button id="textInputButton" style="background-color: white;" onclick="toggleTextInput()">OFF</button>

    <!-- 새로운 일과 기록표 생성 버튼 -->
    <button style="background-color: white;" onclick="addNewSchedule()">새로운 일과 기록표 추가</button>

    <!-- 생성된 일과 기록표 영역 -->
    <div id="schedule-container">
        <!-- 여기에 동적으로 새로운 기록표가 추가될 예정 -->
    </div>

    <script>
        let scheduleCount = 0;
        let textInputMode = false; // 텍스트 입력 모드 상태

        // 오늘 날짜를 6자리 숫자로 반환하는 함수
        function getCurrentDate() {
            const today = new Date();
            const dd = String(today.getDate()).padStart(2, '0');  // 일
            const mm = String(today.getMonth() + 1).padStart(2, '0');  // 월
            const yyyy = today.getFullYear().toString().slice(2);  // 연도 (끝 두 자리)
            return `${dd}${mm}${yyyy}`;  // 형식: 일월연도
        }

        // 새로운 일과 기록표 추가 함수
        function addNewSchedule() {
            scheduleCount++;
            const container = document.getElementById('schedule-container');

            // 오늘 날짜 가져오기
            const todayDate = getCurrentDate();

            // 새로운 스케줄 영역 추가
            const newSchedule = document.createElement('div');
            newSchedule.className = 'schedule';

            // 접기/펼치기 버튼
            const toggleButton = document.createElement('button');
            toggleButton.textContent = "숨기기";
            toggleButton.onclick = function() {
                const table = newSchedule.querySelector('table');
                if (table.style.display === 'none') {
                    table.style.display = 'table';  // 테이블 보이기
                } else {
                    table.style.display = 'none';   // 테이블 숨기기
                }
            };

            newSchedule.innerHTML = `
                <h2>${todayDate}</h2>
                <table>
                    <thead>
                        <tr>
                            <th>시간</th>
                            <th>10분</th>
                            <th>20분</th>
                            <th>30분</th>
                            <th>40분</th>
                            <th>50분</th>
                            <th>60분</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${createRows()}
                    </tbody>
                </table>
            `;

            // 삭제 버튼
            const deleteButton = document.createElement('button');
            deleteButton.textContent = '삭제';
            deleteButton.onclick = function() {
                container.removeChild(newSchedule);
            };

            newSchedule.appendChild(toggleButton); // 접기/펼치기 버튼 추가
            newSchedule.appendChild(deleteButton); // 삭제 버튼 추가

            container.appendChild(newSchedule);
        }

        function createRows() {
            const startHour = 7;
            const endHour = 3;
            let rows = '';

            for (let i = startHour; i <= 24 + endHour; i++) {
                const hour = i % 24;
                rows += `
                    <tr>
                        <td>${hour}:00</td>
                        <td onclick="handleCellClick(this)"></td>
                        <td onclick="handleCellClick(this)"></td>
                        <td onclick="handleCellClick(this)"></td>
                        <td onclick="handleCellClick(this)"></td>
                        <td onclick="handleCellClick(this)"></td>
                        <td onclick="handleCellClick(this)"></td>
                    </tr>
                `;
            }
            return rows;
        }

        let currentColor = 'lightblue';  // 기본 색상

        // 색상 설정 함수
        function setColor(color) {
            currentColor = color;
        }

        // 텍스트 입력 모드 전환 함수
        function toggleTextInput() {
            textInputMode = !textInputMode; // 모드 전환
            const button = document.getElementById('textInputButton');
            if (textInputMode) {
                button.textContent = 'ON'; // 버튼 텍스트 변경
                button.style.backgroundColor = 'red'; // 버튼 색상 변경
                alert("텍스트 입력 모드가 활성화되었습니다. 셀을 클릭하여 내용을 입력하세요.");
            } else {
                button.textContent = 'OFF'; // 버튼 텍스트 변경
                button.style.backgroundColor = 'white'; // 버튼 색상 변경
                alert("텍스트 입력 모드가 비활성화되었습니다.");
            }
        }

        // 셀 클릭 처리 함수
        function handleCellClick(cell) {
            if (textInputMode) {
                const currentInput = prompt("내용을 입력하세요:", cell.innerText); // 입력창 표시
                if (currentInput !== null) {
                    cell.innerText = currentInput; // 입력한 내용을 셀에 추가
                }
            } else {
                if (cell.style.backgroundColor === currentColor) {
                    // 이미 같은 색으로 칠해져 있으면 지우기
                    cell.style.backgroundColor = '';
                } else {
                    // 색칠 모드일 때
                    cell.style.backgroundColor = currentColor;
                }
            }
        }
    </script>
</body>
</html>
